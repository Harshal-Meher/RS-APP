<ngx-ui-loader
  *ngIf="isSubmitting"
  fgsColor="#345FF1"
  pbColor="#345FF1"
  fgsType="three-bounce"
  text="Loading..."
></ngx-ui-loader>

<div class="container my-3">
  <div class="row justify-content-start">
    <div class="col-12 col-md-8 bg-light p-4 rounded shadow-sm border">
      <form
        [formGroup]="frmMainCourse"
        (ngSubmit)="addCourse()"
        class="row g-3"
      >
        <mat-card-header>
          <mat-card-title class="fs-5 fw-medium">Add Course</mat-card-title>
          <hr>
        </mat-card-header>

        <div class="col-12">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Course Type</mat-label>
                <mat-select formControlName="courseTypeId">
                  <mat-option value="" disabled>Select</mat-option>
                  <mat-option value="Crash Course">Crash Course</mat-option>
                  <mat-option value="Professional Course">Professional Course</mat-option>
                </mat-select>
                <mat-error
                  *ngIf="frmMainCourse.get('courseTypeId')?.invalid && frmMainCourse.get('courseTypeId')?.touched"
                >
                  Please select a course type.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Course Categories</mat-label>
                <mat-select formControlName="courseSubTypeId">
                  <mat-option value="" disabled>Select</mat-option>
                  <mat-option value="Intermediate Course">Intermediate Course</mat-option>
                  <mat-option value="Advanced Intermediate Course">Advanced Intermediate Course</mat-option>
                  <mat-option value="Professional Course">Professional Course</mat-option>
                  <mat-option value="Expert Course">Expert Course</mat-option>
                </mat-select>
                <mat-error
                  *ngIf="frmMainCourse.get('courseSubTypeId')?.invalid && frmMainCourse.get('courseSubTypeId')?.touched"
                >
                  Please select a course category.
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="col-12">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Course Name</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="courseName"
                  placeholder="Enter course name"
                />
                <mat-error
                  *ngIf="frmMainCourse.get('courseName')?.invalid && frmMainCourse.get('courseName')?.touched"
                >
                  Please enter a valid course name.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Course Link (Optional)</mat-label>
                <input
                  matInput
                  type="url"
                  formControlName="courseLink"
                  placeholder="Enter course link"
                >
                <mat-error
                  *ngIf="frmMainCourse.get('courseLink')?.invalid && frmMainCourse.get('courseLink')?.touched"
                >
                  Please enter a valid link (e.g., https://example.com).
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="col-12">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Course Description</mat-label>
            <textarea
              matInput
              rows="3"
              formControlName="courceDescribtion"
              placeholder="Enter course description"
            ></textarea>
            <mat-error
              *ngIf="frmMainCourse.get('courceDescribtion')?.invalid && frmMainCourse.get('courceDescribtion')?.touched"
            >
              Please enter a valid course description.
            </mat-error>
          </mat-form-field>
        </div>

        <div class="col-12">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Course Price</mat-label>
                <input
                  matInput
                  type="number"
                  formControlName="coursePrice"
                  placeholder="Enter course price"
                />
                <mat-error
                  *ngIf="frmMainCourse.get('coursePrice')?.invalid && frmMainCourse.get('coursePrice')?.touched"
                >
                  Please enter a valid price.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Course Discount Price</mat-label>
                <input
                  matInput
                  type="number"
                  formControlName="courseDiscount"
                  placeholder="Enter course discount Price"
                />
                <mat-error
                  *ngIf="frmMainCourse.get('courseDiscount')?.invalid && frmMainCourse.get('courseDiscount')?.touched"
                >
                  Please enter a valid discount.
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="col-12">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Start Date</mat-label>
                <input
                  matInput
                  [matDatepicker]="startDatePicker"
                  formControlName="courseStartDate"
                />
                <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #startDatePicker></mat-datepicker>
                <mat-error
                  *ngIf="frmMainCourse.get('courseStartDate')?.invalid && frmMainCourse.get('courseStartDate')?.touched"
                >
                  Please select a start date.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>End Date</mat-label>
                <input
                  matInput
                  [matDatepicker]="endDatePicker"
                  formControlName="courseEndDate"
                />
                <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #endDatePicker></mat-datepicker>
                <mat-error
                  *ngIf="frmMainCourse.get('courseEndDate')?.invalid && frmMainCourse.get('courseEndDate')?.touched"
                >
                  Please select an end date.
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="col-12">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>Start Time</mat-label>
                <input
                  matInput
                  formControlName="courseStartTime"
                  [ngxTimepicker]="startTimePicker"
                  readonly
                />
                <ngx-material-timepicker #startTimePicker></ngx-material-timepicker>
                <mat-error
                  *ngIf="frmMainCourse.get('courseStartTime')?.invalid && frmMainCourse.get('courseStartTime')?.touched"
                >
                  Please select a start time.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-6">
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>End Time</mat-label>
                <input
                  matInput
                  formControlName="courseEndTime"
                  [ngxTimepicker]="endTimePicker"
                  readonly
                />
                <ngx-material-timepicker #endTimePicker></ngx-material-timepicker>
                <mat-error
                  *ngIf="frmMainCourse.get('courseEndTime')?.invalid && frmMainCourse.get('courseEndTime')?.touched"
                >
                  Please select an end time.
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="col-12">
          <div class="row g-3 align-items-center">
            <div class="col-12 col-md-6">
              <mat-checkbox formControlName="isActive">Mark as Active</mat-checkbox>
            </div>
            <div class="col-12 col-md-6 text-md-end">
              <button
                mat-raised-button
                color="primary"
                type="submit"
                [disabled]="frmMainCourse.invalid || isSubmitting"
              >
                Submit
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>